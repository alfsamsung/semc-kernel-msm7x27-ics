
#Linaro4.7 2012.12
#CROSS_COMPILE=/media/ICS/home-ics/Android/kernel/Toolchain/linaro4.7-2012.12/bin/arm-linux-gnueabihf-

#Linaro4.7 2013.02-01
CROSS_COMPILE=/media/ICS/home-ics/Android/kernel/Toolchain/linaro4.7-2013.02-01/bin/arm-linux-gnueabihf-

#Linux 4.4.3
#CROSS_COMPILE=/media/Alf/home/alf/android/system/prebuilt/linux-x86/toolchain/arm-eabi-4.4.3/bin/arm-eabi-

KERNEL_DIR=/media/ICS/home-ics/Android/kernel/ny_test_kernel

VENDOR_TI_WLAN=/media/Alf/home/alf/android/system/vendor/semc/shakira/vendor_ti_wlan

CP=/$KERNEL_DIR/../compiled


#cleanup
if [ -e $CP ];
then
	rm -r $CP;
fi;

#prep
if [ ! -e $CP ];
then
	mkdir $CP $CP/modules;
fi;

cp ./arch/arm/boot/zImage $CP/
cp ./drivers/net/tun.ko $CP/modules/
cp ./drivers/staging/zcache/zcache.ko $CP/modules/
cp ./drivers/staging/ramzswap/ramzswap.ko $CP/modules/
cp ./fs/cifs/cifs.ko $CP/modules/
cp ./fs/fuse/fuse.ko $CP/modules/
cp ./lib/frandom.ko $CP/modules/

#make wifi

cd /$VENDOR_TI_WLAN/sta/platforms/os/linux
export CROSS_COMPILE=$CROSS_COMPILE
export ARCH=arm
export HOST_PLATFORM=msm
export KERNEL_DIR=$KERNEL_DIR

make clean
make
cp *.ko $CP/modules/
make clean

cd /$VENDOR_TI_WLAN/ap/platforms/os/linux
export CROSS_COMPILE=$CROSS_COMPILE
export ARCH=arm
export HOST_PLATFORM=msm
export KERNEL_DIR=$KERNEL_DIR

make clean
make
cp *.ko $CP/modules/
make clean
cd /$CP
